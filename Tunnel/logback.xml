<configuration>
  <property file="./logback_vars.properties" />
  <timestamp key="timestamp" datePattern="yyyy-MM-dd-HH-mm-ss"/>
   
  <appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">
    <target>System.out</target>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>ERROR</level>
      <onMatch>DENY</onMatch>
      <onMismatch>NEUTRAL</onMismatch>
    </filter>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>TRACE</level>
      <onMatch>DENY</onMatch>
      <onMismatch>ACCEPT</onMismatch>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%thread] %-5level \(%13F:%L\) - %m %throwable{${num.stack.trace.lines}}%n</pattern>
    </encoder>
  </appender>
  
  <appender name="stderr" class="ch.qos.logback.core.ConsoleAppender">
    <target>System.err</target>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
      <level>ERROR</level>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%thread] %-5level \(%13F:%L\) - %m %throwable{${num.stack.trace.lines}}%n</pattern>
    </encoder>
  </appender>
  
  <appender name="trace_out" class="ch.qos.logback.core.FileAppender">
    <File>${log.path}/log_trace_${timestamp}.txt</File>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>TRACE</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>%m%n</pattern>
    </encoder>
  </appender>
  
  <appender name="debug_out" class="ch.qos.logback.core.FileAppender">
    <File>${log.path}/log_debug_${timestamp}.txt</File>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>DEBUG</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%t] %-5p \(%13F:%L\) - %m%n</pattern>
    </encoder>
  </appender>
  
  <appender name="info_out" class="ch.qos.logback.core.FileAppender">
    <File>${log.path}/log_info_${timestamp}.txt</File>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>INFO</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%t] %-5p \(%13F:%L\) - %m%n</pattern>
    </encoder>
  </appender>
  
  <appender name="warn_out" class="ch.qos.logback.core.FileAppender">
    <File>${log.path}/log_warn_${timestamp}.txt</File>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>WARN</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%t] %-5p \(%13F:%L\) - %m%n</pattern>
    </encoder>
  </appender>
  
  <appender name="error_out" class="ch.qos.logback.core.FileAppender">
    <File>${log.path}/log_error_${timestamp}.txt</File>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>ERROR</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <encoder>
      <pattern>%d{"HH:mm:ss,SSS"} [%t] %-5p \(%13F:%L\) - %m %throwable{${num.stack.trace.lines}}%n</pattern>
    </encoder>
  </appender>
  
  <logger name="org.springframework" level="WARN"/>
  <logger name="com.mchange" level="ERROR"/>
  <logger name="org.apache" level="WARN"/>
  
  <root level="${root.logger.level}">
    <appender-ref ref="stdout" />
    <appender-ref ref="stderr" />
    <appender-ref ref="trace_out" />
    <appender-ref ref="debug_out" />
    <appender-ref ref="info_out" />
    <appender-ref ref="warn_out" />
    <appender-ref ref="error_out" />
  </root>
</configuration>